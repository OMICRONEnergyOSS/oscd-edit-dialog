{"version":3,"file":"conductingequipment.js","sources":["../../../wizards/conductingequipment.ts"],"sourcesContent":["import { html, TemplateResult } from 'lit';\n\nimport { EditV2 } from '@omicronenergy/oscd-api';\n\nimport { getReference } from '@openenergytools/scl-lib';\n\nimport {\n  createElement,\n  crossProduct,\n  getValue,\n  reservedNames,\n  Wizard,\n  WizardActor,\n  WizardInputElement,\n} from '../foundation.js';\n\nconst types: Partial<Record<string, string>> = {\n  // standard\n  CBR: 'Circuit Breaker',\n  DIS: 'Disconnector',\n  // custom\n  ERS: 'Earth Switch',\n  CTR: 'Current Transformer',\n  VTR: 'Voltage Transformer',\n  AXN: 'Auxiliary Network',\n  BAT: 'Battery',\n  BSH: 'Bushing',\n  CAP: 'Capacitor Bank',\n  CON: 'Converter',\n  EFN: 'Earth Fault Neutralizer',\n  FAN: 'Fan',\n  GIL: 'Gas Insulated Line',\n  GEN: 'Generator',\n  IFL: 'Infeeding Line',\n  MOT: 'Motor',\n  RES: 'Neutral Resistor',\n  REA: 'Reactor',\n  PSH: 'Power Shunt',\n  CAB: 'Power Cable',\n  PMP: 'Pump',\n  LIN: 'Power Overhead Line',\n  RRC: 'Rotating Reactive Component',\n  SCR: 'Semiconductor Controlled Rectifier',\n  SAR: 'Surge Arrester',\n  SMC: 'Synchronous Machine',\n  TCF: 'Thyristor Controlled Frequency Converter',\n  TCR: 'Thyristor Controlled Reactive Component',\n};\n\nfunction getLogicalNodeInstance(lNode: Element | null): Element | null {\n  if (!lNode) {\n    return null;\n  }\n  const [lnInst, lnClass, iedName, ldInst, prefix] = [\n    'lnInst',\n    'lnClass',\n    'iedName',\n    'ldInst',\n    'prefix',\n  ].map(attribute => lNode?.getAttribute(attribute));\n  const iedSelector = [`IED[name=\"${iedName}\"]`, 'IED'];\n  const lDevicePath = ['AccessPoint > Server'];\n  const lNSelector = [\n    `LDevice[inst=\"${ldInst}\"] > LN[inst=\"${lnInst}\"][lnClass=\"${lnClass}\"]`,\n  ];\n  const lNPrefixSelector =\n    prefix && prefix !== ''\n      ? [`[prefix=\"${prefix}\"]`]\n      : ['[prefix=\"\"]', ':not(prefix)'];\n  return lNode.ownerDocument.querySelector(\n    crossProduct(\n      iedSelector,\n      [' > '],\n      lDevicePath,\n      [' > '],\n      lNSelector,\n      lNPrefixSelector,\n    )\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      .map((strings: any[]) => strings.join(''))\n      .join(','),\n  );\n}\n\nfunction getSwitchTypeValueFromDTT(lNorlNode: Element): string | undefined {\n  const rootNode = lNorlNode?.ownerDocument;\n  const lNodeType = lNorlNode.getAttribute('lnType');\n  const lnClass = lNorlNode.getAttribute('lnClass');\n  const dObj = rootNode.querySelector(\n    `DataTypeTemplates > LNodeType[id=\"${lNodeType}\"][lnClass=\"${lnClass}\"] > DO[name=\"SwTyp\"]`,\n  );\n  if (dObj) {\n    const dORef = dObj.getAttribute('type');\n    return rootNode\n      .querySelector(\n        `DataTypeTemplates > DOType[id=\"${dORef}\"] > DA[name=\"stVal\"] > Val`,\n      )\n      ?.innerHTML.trim();\n  }\n\n  return undefined;\n}\n\nfunction getSwitchTypeValue(lN: Element): string | undefined {\n  const daInstantiated = lN.querySelector(\n    'DOI[name=\"SwTyp\"] > DAI[name=\"stVal\"]',\n  );\n\n  if (daInstantiated) {\n    return daInstantiated.querySelector('Val')?.innerHTML.trim();\n  }\n\n  return getSwitchTypeValueFromDTT(lN);\n}\n\nfunction containsGroundedTerminal(condEq: Element): boolean {\n  return Array.from(condEq.querySelectorAll('Terminal')).some(\n    t => t.getAttribute('cNodeName') === 'grounded',\n  );\n}\n\nfunction containsEarthSwitchDefinition(condEq: Element): boolean {\n  const lNodeXSWI = condEq.querySelector('LNode[lnClass=\"XSWI\"]');\n  const lN = getLogicalNodeInstance(lNodeXSWI);\n  let swTypVal;\n  if (lN) {\n    swTypVal = getSwitchTypeValue(lN);\n  } else if (lNodeXSWI) {\n    swTypVal = getSwitchTypeValueFromDTT(lNodeXSWI);\n  }\n  return swTypVal\n    ? ['Earthing Switch', 'High Speed Earthing Switch'].includes(swTypVal)\n    : false;\n}\n\nfunction typeStr(condEq: Element): string {\n  if (\n    condEq.getAttribute('type') === 'DIS' &&\n    (containsGroundedTerminal(condEq) || containsEarthSwitchDefinition(condEq))\n  ) {\n    return 'ERS';\n  }\n\n  return condEq.getAttribute('type') ?? '';\n}\n\nfunction typeName(condEq: Element): string {\n  return types[typeStr(condEq)] ?? 'Unknown Type';\n}\n\nfunction renderTypeSelector(\n  option: 'edit' | 'create',\n  type: string,\n): TemplateResult {\n  return option === 'create'\n    ? html`<scl-select\n        required\n        label=\"type\"\n        .selectOptions=${Object.values(types)}\n      ></scl-select>`\n    : html`<scl-select\n        label=\"type\"\n        disabled\n        .selectOptions=${Object.values(types)}\n        .value=${type}\n      >\n      </scl-select>`;\n}\n\ntype RenderOptions = {\n  name: string | null;\n  desc: string | null;\n  option: 'edit' | 'create';\n  type: string;\n  reservedValues: string[];\n};\n\nfunction renderConductingEquipmentWizard(\n  options: RenderOptions,\n): TemplateResult[] {\n  return [\n    renderTypeSelector(options.option, options.type),\n    html`<scl-text-field\n      label=\"name\"\n      .value=${options.name}\n      required\n      dialogInitialFocus\n      .reservedValues=${options.reservedValues}\n    ></scl-text-field>`,\n    html`<scl-text-field\n      label=\"desc\"\n      .value=${options.desc}\n      nullable\n    ></scl-text-field>`,\n  ];\n}\n\nfunction createAction(parent: Element): WizardActor {\n  return (inputs: WizardInputElement[]): EditV2[] => {\n    const name = getValue(inputs.find(i => i.label === 'name')!);\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const hrType = getValue(inputs.find(i => i.label === 'type')!);\n    const proxyType = Object.entries(types).find(\n      ([_, value]) => value === hrType,\n    )![0];\n    const type = proxyType === 'ERS' ? 'DIS' : proxyType;\n\n    const element = createElement(parent.ownerDocument, 'ConductingEquipment', {\n      name,\n      type,\n      desc,\n    });\n    const action = {\n      parent,\n      node: element,\n      reference: getReference(parent, 'ConductingEquipment'),\n    };\n\n    if (hrType !== 'ERS') {\n      return [action];\n    }\n\n    const groundNode = parent\n      .closest('VoltageLevel')\n      ?.querySelector('ConnectivityNode[name=\"grounded\"]');\n\n    const substationName = groundNode\n      ? (groundNode.closest('Substation')?.getAttribute('name') ?? null)\n      : (parent.closest('Substation')?.getAttribute('name') ?? null);\n    const voltageLevelName = groundNode\n      ? (groundNode.closest('VoltageLevel')?.getAttribute('name') ?? null)\n      : (parent.closest('VoltageLevel')?.getAttribute('name') ?? null);\n    const bayName = groundNode\n      ? (groundNode.closest('Bay')?.getAttribute('name') ?? null)\n      : (parent.closest('Bay')?.getAttribute('name') ?? null);\n    const connectivityNode =\n      bayName && voltageLevelName && substationName\n        ? `${substationName}/${voltageLevelName}/${bayName}/grounded`\n        : null;\n\n    const groundTerminal = createElement(parent.ownerDocument, 'Terminal', {\n      name: 'T1',\n      cNodeName: 'grounded',\n      substationName,\n      voltageLevelName,\n      bayName,\n      connectivityNode,\n    });\n\n    const terminalAction = {\n      parent: element,\n      node: groundTerminal,\n      reference: getReference(element, 'Terminal'),\n    };\n    if (groundNode) {\n      return [action, terminalAction];\n    }\n\n    const cNodeElement = createElement(\n      parent.ownerDocument,\n      'ConnectivityNode',\n      {\n        name: 'grounded',\n        pathName: connectivityNode,\n      },\n    );\n\n    const cNodeAction = {\n      parent,\n      node: cNodeElement,\n      reference: getReference(parent, 'ConnectivityNode'),\n    };\n    return [action, terminalAction, cNodeAction];\n  };\n}\n\nexport function createConductingEquipmentWizard(parent: Element): Wizard {\n  return {\n    title: 'Add ConductingEquipment',\n    primary: {\n      icon: 'add',\n      label: 'add',\n      action: createAction(parent),\n    },\n    content: renderConductingEquipmentWizard({\n      name: '',\n      desc: '',\n      option: 'create',\n      type: '',\n      reservedValues: reservedNames(parent, 'ConductingEquipment'),\n    }),\n  };\n}\n\nfunction updateAction(element: Element): WizardActor {\n  return (inputs: WizardInputElement[]): EditV2[] => {\n    const name = getValue(inputs.find(i => i.label === 'name')!)!;\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n\n    if (\n      name === element.getAttribute('name') &&\n      desc === element.getAttribute('desc')\n    ) {\n      return [];\n    }\n\n    return [{ element, attributes: { name, desc } }];\n  };\n}\n\nexport function editConductingEquipmentWizard(element: Element): Wizard {\n  return {\n    title: 'Edit ConductingEquipment',\n    primary: {\n      icon: 'edit',\n      label: 'save',\n      action: updateAction(element),\n    },\n    content: renderConductingEquipmentWizard({\n      name: element.getAttribute('name'),\n      desc: element.getAttribute('desc'),\n      option: 'edit',\n      type: typeName(element),\n      reservedValues: reservedNames(element),\n    }),\n  };\n}\n"],"names":["html"],"mappings":"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"}