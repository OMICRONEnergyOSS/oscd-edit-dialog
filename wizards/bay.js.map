{"version":3,"file":"bay.js","sources":["../../../wizards/bay.ts"],"sourcesContent":["import { html, TemplateResult } from 'lit';\n\nimport { EditV2 } from '@omicronenergy/oscd-api';\n\nimport { getReference, updateBay } from '@openenergytools/scl-lib';\n\nimport {\n  createElement,\n  getValue,\n  reservedNames,\n  Wizard,\n  WizardActor,\n  WizardInputElement,\n} from '../foundation.js';\n\ntype RenderOptions = {\n  name: string | null;\n  reservedValues: string[];\n  desc: string | null;\n};\n\nexport function renderBayWizard(options: RenderOptions): TemplateResult[] {\n  return [\n    html`<scl-text-field\n      label=\"name\"\n      .value=${options.name}\n      required\n      .reservedValues=\"${options.reservedValues}\"\n      dialogInitialFocus\n    ></scl-text-field>`,\n    html`<scl-text-field\n      label=\"desc\"\n      .value=${options.desc}\n      nullable\n    ></scl-text-field>`,\n  ];\n}\n\nexport function createAction(parent: Element): WizardActor {\n  return (inputs: WizardInputElement[]): EditV2[] => {\n    const name = getValue(inputs.find(i => i.label === 'name')!);\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const node = createElement(parent.ownerDocument, 'Bay', {\n      name,\n      desc,\n    });\n\n    const action = {\n      parent,\n      node,\n      reference: getReference(parent, 'Bay'),\n    };\n\n    return [action];\n  };\n}\n\nexport function createBayWizard(parent: Element): Wizard {\n  return {\n    title: 'Add Bay',\n    primary: {\n      icon: '',\n      label: 'add',\n      action: createAction(parent),\n    },\n    content: renderBayWizard({\n      name: '',\n      reservedValues: reservedNames(parent, 'Bay'),\n      desc: '',\n    }),\n  };\n}\n\nexport function updateAction(element: Element): WizardActor {\n  return (inputs: WizardInputElement[]): EditV2[] => {\n    const name = inputs.find(i => i.label === 'name')!.value!;\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n\n    if (\n      name === element.getAttribute('name') &&\n      desc === element.getAttribute('desc')\n    ) {\n      return [];\n    }\n\n    return updateBay({ element, attributes: { name, desc } });\n  };\n}\n\nexport function editBayWizard(element: Element): Wizard {\n  return {\n    title: 'Edit Bay',\n    primary: {\n      icon: 'edit',\n      label: 'save',\n      action: updateAction(element),\n    },\n    content: renderBayWizard({\n      name: element.getAttribute('name'),\n      reservedValues: reservedNames(element),\n      desc: element.getAttribute('desc'),\n    }),\n  };\n}\n"],"names":["html"],"mappings":";;;;;;;;;;;;;;AAqBM,SAAU,eAAe,CAAC,OAAsB,EAAA;IACpD,OAAO;AACL,QAAAA,CAAI,CAAA,CAAA;;AAEO,aAAA,EAAA,OAAO,CAAC,IAAI;;AAEF,uBAAA,EAAA,OAAO,CAAC,cAAc,CAAA;;AAExB,sBAAA,CAAA;AACnB,QAAAA,CAAI,CAAA,CAAA;;AAEO,aAAA,EAAA,OAAO,CAAC,IAAI;;AAEJ,sBAAA,CAAA;KACpB;AACH;AAEM,SAAU,YAAY,CAAC,MAAe,EAAA;IAC1C,OAAO,CAAC,MAA4B,KAAc;AAChD,QAAA,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,CAAE,CAAC;AAC5D,QAAA,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,CAAE,CAAC;QAC5D,MAAM,IAAI,GAAG,aAAa,CAAC,MAAM,CAAC,aAAa,EAAE,KAAK,EAAE;YACtD,IAAI;YACJ,IAAI;AACL,SAAA,CAAC;AAEF,QAAA,MAAM,MAAM,GAAG;YACb,MAAM;YACN,IAAI;AACJ,YAAA,SAAS,EAAE,YAAY,CAAC,MAAM,EAAE,KAAK,CAAC;SACvC;QAED,OAAO,CAAC,MAAM,CAAC;AACjB,IAAA,CAAC;AACH;AAEM,SAAU,eAAe,CAAC,MAAe,EAAA;IAC7C,OAAO;AACL,QAAA,KAAK,EAAE,SAAS;AAChB,QAAA,OAAO,EAAE;AACP,YAAA,IAAI,EAAE,EAAE;AACR,YAAA,KAAK,EAAE,KAAK;AACZ,YAAA,MAAM,EAAE,YAAY,CAAC,MAAM,CAAC;AAC7B,SAAA;QACD,OAAO,EAAE,eAAe,CAAC;AACvB,YAAA,IAAI,EAAE,EAAE;AACR,YAAA,cAAc,EAAE,aAAa,CAAC,MAAM,EAAE,KAAK,CAAC;AAC5C,YAAA,IAAI,EAAE,EAAE;SACT,CAAC;KACH;AACH;AAEM,SAAU,YAAY,CAAC,OAAgB,EAAA;IAC3C,OAAO,CAAC,MAA4B,KAAc;AAChD,QAAA,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,CAAE,CAAC,KAAM;AACzD,QAAA,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,CAAE,CAAC;AAE5D,QAAA,IACE,IAAI,KAAK,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC;YACrC,IAAI,KAAK,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,EACrC;AACA,YAAA,OAAO,EAAE;QACX;AAEA,QAAA,OAAO,SAAS,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC;AAC3D,IAAA,CAAC;AACH;AAEM,SAAU,aAAa,CAAC,OAAgB,EAAA;IAC5C,OAAO;AACL,QAAA,KAAK,EAAE,UAAU;AACjB,QAAA,OAAO,EAAE;AACP,YAAA,IAAI,EAAE,MAAM;AACZ,YAAA,KAAK,EAAE,MAAM;AACb,YAAA,MAAM,EAAE,YAAY,CAAC,OAAO,CAAC;AAC9B,SAAA;QACD,OAAO,EAAE,eAAe,CAAC;AACvB,YAAA,IAAI,EAAE,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC;AAClC,YAAA,cAAc,EAAE,aAAa,CAAC,OAAO,CAAC;AACtC,YAAA,IAAI,EAAE,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC;SACnC,CAAC;KACH;AACH;;;;"}